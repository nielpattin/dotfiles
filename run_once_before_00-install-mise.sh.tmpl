{{ if eq .chezmoi.os "linux" -}}
#!/usr/bin/env bash
set -euo pipefail

# Install mise if missing (one-time bootstrap for Linux/WSL)
if command -v mise >/dev/null 2>&1; then
  exit 0
fi

if [ -x "$HOME/.local/bin/mise" ]; then
  exit 0
fi

if ! command -v curl >/dev/null 2>&1; then
  echo "curl is required to install mise" >&2
  exit 1
fi

curl -fsSL https://mise.run | sh

if [ ! -x "$HOME/.local/bin/mise" ]; then
  echo "mise install completed but $HOME/.local/bin/mise was not found" >&2
  exit 1
fi
{{- end }}
